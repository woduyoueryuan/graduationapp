<!DOCTYPE html>

<html>


<head>

    <meta name="viewport"
          content="width=device-width, initial-scale=1.0, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0"/>

    <meta charset="UTF-8">

    <title>Title</title>

    <script src="https://ajax.aspnetcdn.com/ajax/jQuery/jquery-3.2.1.js"></script>

    <script type="text/javascript" src="https://res.wx.qq.com/open/js/jweixin-1.3.0.js"></script>


</head>


<body>
<div class="div">
<form id="form1" action="http://192.168.230.1:8080/graduationapp_war_exploded/upload" target="frame1" method="post"
      enctype="multipart/form-data">

    <input type="file" name="file">

    <input type="button" value="上传" onclick="upload()">

    <input type="button" value="后退" onclick="back()">
</form>
</div>
<iframe name="frame1" frameborder="0" height="40"></iframe>

<!-- 其实我们可以把iframe标签隐藏掉 -->

<script type="text/javascript">

    function back() {
        wx.miniProgram.redirectTo({url: '../../pages/courseware/courseware'})
    }

    function upload() {

        $("#form1").submit();

        var t = setInterval(function () {

            //获取iframe标签里body元素里的文字。即服务器响应过来的"上传成功"或"上传失败"

            var word = $("iframe[name='frame1']").contents().find("body").text();

            if (word != "") {

                   //  alert(word); //弹窗提示是否上传成功

                     // clearInterval(t); //清除定时器

            }

        }, 1000);

    }

</script>

</body>


</html>